os:
  - linux
  - osx
language: objective-c
env:
  - BRANCH="master"
  - BRANCH="devel"
before_install:
  - if [ "$TRAVIS_OS_NAME" = "linux" ]; then sudo apt-get update; fi
  - if [ "$TRAVIS_OS_NAME" = "osx" ]; then brew update; fi
install:
  - if [ "$TRAVIS_OS_NAME" = "linux" ]; then sudo apt-get install libfuse-dev; fi
  - if [ "$TRAVIS_OS_NAME" = "osx" ]; then brew install osxfuse; fi
  - git clone -b $BRANCH git://github.com/Araq/Nim.git; cd Nim; git clone -b $BRANCH --depth 1 git://github.com/nim-lang/csources; cd csources && sh build.sh; cd ..; bin/nim c koch; ./koch boot -d:release; cd ..
before_script:
  - export PATH=./Nim/bin:$PATH
script:
  - nim c --os:linux --compile_only hello
  - nim c hello
